# Why is XFS not more popular? Are there are any concerns with XFS still? (self.linux)

dodane 1 rok temu * przez ECrispy

This is for home desktop usage, not servers/data centers where XFS is far more common.

performance - in every test I could find, XFS is near the top, beating btrfs/ext4. Its esp good for parallel workloads and almost everything on a modern desktop is like that. The only perf concern I read about is it used to have higher cpu usage for updating metadata but I believe thats been fixed and no longer relevant?

(I think for most users, performance in benchmarks may not be noticeable and other features matter more, but its still an important consideration)

SSD/OS installs - XFS is almost as fast as f2fs for these. I see no reason why anyone would use f2fs on anything other than a sd card or on any NAND device with wear leveling.

CoW/snapshots - this is no doubt a very powerful feature of zfs/btrfs. But I see very little mention of reflinks/snapshots on XFS which can achieve a lot of this. They are not atomic but enough to satisfy a lot of use cases. I don't see support for this in the usual tools like snapper/timeshift either. XFS also has support for deduping. All of this comes without the usual cost of CoW

other features - dynamic inodes (on ext4 an inode for every 16kb/256kb is wasteful, even if most people never notice it), automatic fsck, journalling (sure, copied from ext3, but thats not a bad thing)

stability/reliability - I don't think there should be any doubt about this. Its a proven enterprise class fs with a hallowed pedigree and reputation, is now backed by RHEL and has probably seen more active development than most other file systems.

​

The biggest factor seems to be that the default ext4 is good enough, and frankly most people will not care or know about, and should not care, about the underlying fs. There are also distros like Fedora/OpenSuse that used to use XFS as the default and have switched to btrfs. I don't know of anything that uses XFS as default except unRaid now - unRaid is used to manage TBs by home users and that probably says something.

​

The only concerns I've found are -

a) it doesn't support shrinking a volume. how common is this anyway? I've never seen any home user need to do this, 99% of the time you only need this when you are installing another OS on the same ssd/hdd and need to shrink your current /, which is an advanced use case.

b)supposedly XFS doesn't handle hw failures. Even on this I found no consensus - some people say its risky and can corrupt with no recovery, others say even with a forced shutdown its safe. I'm not sure if its any less robust than ext4/btrfs? Is this actually a concern these days?

## Comments

- 1
I stopped using XFS except in cases where it is the default FS specifically because it doesn't handle shrinking a volume, after discovering this "feature" the hard way once.

- 2 
Yeah it's a nightmare for anything virtualization related. The moment you're in a situation where shrinking needs to be happen it's an entire ordeal to juggle everything into a temporary location one way or another to juggle it back onto a resizable filesystem instead. Then telling the OS about a potentially new (say, ext4) rootfs and often having to worry about the module for that not being a built-in and other potential initramfs/boot process hiccups as various files such as fstab need to be updated.

Or you can use a resizable one and not think about it ever again.

- 3
I have run into two issues that had me move away from XFS, even though I had better performance using XFS over ext4. The first was the inability to shrink became a problem. The other is it is hard to repair after certain events. I have lost two filesystems that I could have recovered in similar scenarios using ext filesystems. Time to repair after a repairable event has taken roughly twice as long using XFS. I also had more times where I had to interactively do repairs that didn't require interaction with EXT systems. To get the features I wanted for server storage, I moved to ZFS. It has been flawless. One of my use cases has the server and disks in an RV, so the environment is not ideal, and ZFS has never had a problem compared to XFS and EXT4.

All that being said, for desktop use I would just use whatever the distro I chose used as its default. I much more likely to use the distro tools for managing things on my desktop, and sticking to defaults makes those work smoother in

